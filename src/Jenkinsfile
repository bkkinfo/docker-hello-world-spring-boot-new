node{
    
    stage('SCM Checkout'){
        git url: 'https://github.com/bkkinfo/ocker-hello-world-spring-boot.git'
    }
    try{
    stage(" Maven Clean Package"){
      def mavenHome =  tool name: "maven", type: "maven"
      def mavenCMD = "${mavenHome}/bin/mvn"
      sh "${mavenCMD} clean package"
      
     
    def testIssue = [fields: [ project: [key: 'DEM'],
                                 summary: 'New JIRA Created from Jenkins.',
                                 description: 'New JIRA Created from Jenkins.',
                                 issuePriority: [name : 'Medium'],
                                 issuetype: [name : 'Task']]]

      response = jiraNewIssue issue: testIssue, site: 'JIRA'

      echo response.successful.toString()
      echo response.data.toString()
             
    }
    }
            catch (Exception err) {
        currentBuild.result = 'FAILURE'
                def testIssue = [fields: [ project: [key: 'DEM'],
                                 summary: 'Failure',
                                 description: 'Build Failed',
                                 issuePriority: [name : 'Medium'],
                                 issuetype: [name : 'Bug']]]

      response = jiraNewIssue issue: testIssue, site: 'JIRA'

      echo response.successful.toString()
      echo response.data.toString()
    }
        
     }
